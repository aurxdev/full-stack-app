CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    nom VARCHAR(100),
    mdp VARCHAR(100),
	isSupport boolean
);


CREATE TABLE tickets (
    id SERIAL PRIMARY KEY,
    nom VARCHAR(255) NOT NULL,
    categorie VARCHAR(255) NOT NULL,
    description TEXT NOT NULL,
    date TIMESTAMP NOT NULL,
    etat VARCHAR(50) NOT NULL,
    statut VARCHAR(50) NOT NULL,
    idUser INTEGER NOT NULL REFERENCES public.users(id),
    idSupport INTEGER NOT NULL REFERENCES public.users(id)
);

CREATE TABLE messages (
    id SERIAL PRIMARY KEY,
    idTicket INTEGER NOT NULL REFERENCES public.tickets(id) ON DELETE SET NULL,
    contenu TEXT,
    date TIMESTAMP NOT NULL,
    idUser INTEGER NOT NULL REFERENCES public.users(id)
);

-- Création d'un admin
INSERT INTO users (nom, mdp, isSupport) VALUES ('admin', 'admin', true);

-- Création d'un utilisateur
INSERT INTO users (nom, mdp, isSupport) VALUES ('user', 'user', false);